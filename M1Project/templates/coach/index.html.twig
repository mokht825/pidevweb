{% extends 'base.html.twig' %}
{% block title %}Coachs{% endblock %}

{% block body %}<input type="search" class="form-control" id="search" placeholder="Search...">
    <div class="row" id="allTTT">
    {% for coach in coaches %}
    <div class="col-md-4" >
            <div class="product-item">
                <div class="product-thumb">
                    <img class="img-responsive" src="/uploads/images/coach.png" style="width: 250px;height: 250px;" alt="product-img" />
                    <div class="preview-meta">

                    </div>
                </div>
                <div class="product-content">
                    <h4><a href="{{ path('coach_showC', {'Idcoach': coach.Idcoach}) }}">{{ coach.Nomcoach }} {{ coach.Prenomcoach }}</a></h4>
                    <p class="price">{{ coach.typesesport.nom }}</p>


                </div>
            </div>
    </div>
    {% endfor %}
    </div>
        <div  class="row" id="search11"></div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $( document ).ready(function() {
                $("#search").keyup(function(e){
                    /* La variable value va prendre la valeur insérer dans le champ de texte
                    afin d’effectuer la recherche */
                    var value = $(this).val();
                    /* Ajax est lancé lors du remplissage du champ texte dont l’id est
                    « search » pour faire la recherche */
                    $.ajax({
                        /* l’url est une chaine de caractères contenant l’adresse où la requête est
                        envoyée */
                        url : "{{ path('search') }}",
                        /* La méthode utilisée pour transférer les données est GET */
                        type : 'GET',
                        /*Ici search value va prendre la chaine entrée par un utilisateur dans la
                        zone de recherche et sera placée après l’url */
                        data: {
                            'searchValue' : value
                        },
                        /*Cette fonction permet de vider le contenu du tableau pour recevoir le
                        nouveau contenu*/
                        success : function(retour){
                            if(retour){
                                $("#search11").empty();

                                $.each(JSON.parse(retour), function(i, obj) {
                                    $("#allTTT").hide();
                                    $("#search11").append(
                                        ' <div class="col-md-4" >'+
                                       ' <div class="product-item">'+
                                            '<div class="product-thumb">'+
                                                '<img class="img-responsive" src="/uploads/images/coach.png" style="width: 250px;height: 250px;" alt="product-img" />'+
                                               '<div class="preview-meta">' +
                                                '</div>'+
                                            '</div>'+
                                            '<div class="product-content">' +
                                        '<h4>' + obj.Nomcoach + '</h4>' +
                                            '</div>'+
                                        '</div>'+
                                        '</div>'
                                    );
                                });
                            }
                            else
                            {
                                $('#allTTT').show();
                                $('#search11').empty();
                                $('#search11').fadeIn('fast');
                            }

                        },
                    });
                    return false;
                });
            });
        </script>

    <a href="{{ path('coach_index') }}">interface admin</a>
{% endblock %}
